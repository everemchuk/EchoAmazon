@use "sass:color"
@use '@shared/styles/vars' as *

@keyframes float
	0%
		transform: translateY(20px)
	50%
		transform: translateY(10px)
	100%
		transform: translateY(20px)

.product-card
	position: relative
	width: 300px
	height: 450px
	border-radius: 20px
	// overflow: hidden
	clip-path: inset(-150px 0 0 0 round 20px)
	background: transparent
	transition: all 0.3s ease

	// Only apply hover effects if NOT loading
	&:not(.loading):hover

		.product-image
			transform: scale(0.8) translateY(-60px)

		.image-container
			animation: none
			transform: translateY(0)

		.card-shape
			height: 75%

		.content
			height: 75%
			transform: translateX(-50%)

		.hover-details
			opacity: 1
			transform: translateY(0)

		.info
			margin-top: 3rem
			margin-bottom: 0.5rem

		.brand
			margin-bottom: 0.5rem

		.price
			margin-bottom: 0.5rem

		.sizes
			//margin-bottom: 0.5rem

.image-container
	position: relative
	height: 60%
	width: 100%
	z-index: 2
	animation: float 4s ease-in-out infinite
	transition: transform 0.3s ease

.card-shape
	position: absolute
	bottom: 0
	left: 50%
	transform: translateX(-50%)
	width: 85%
	height: 40% // Initial height
	z-index: 1
	transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1)

	// Top slanted part
	&::before
		content: ""
		position: absolute
		top: -10px
		left: 0
		width: 100%
		height: 80px
		background-color: var(--bg-color)
		transform: skewY(-10deg)
		border-radius: 20px 20px 0 0
		border: 1px solid var(--border-color)
		border-bottom: none
		z-index: -1

	// Bottom flat part
	&::after
		content: ""
		position: absolute
		top: 30px
		left: 0
		width: 100%
		bottom: 0
		background-color: var(--bg-color)
		border-radius: 0 0 20px 20px
		border: 1px solid var(--border-color)
		border-top: none
		z-index: -1

.bg-shape
	position: absolute
	bottom: 80% // Position above the white content
	left: 50%
	// Skew to create the angled look while preserving border-radius
	transform: translateX(-50%) skewY(-10deg)
	width: 85%
	height: 150px // Fixed height for the gray shape
	background: linear-gradient(180deg, #9ca3af 0%, #6b7280 100%)
	border-radius: 20px
	z-index: -2

.product-image
	width: 100%
	height: 100%
	object-fit: contain
	padding: 20px
	transition: transform 0.4s ease, opacity 0.5s ease
	filter: drop-shadow(0 10px 20px rgba(0,0,0,0.2))
	opacity: 1

	&.loading
		opacity: 0

.content
	position: absolute
	bottom: 0
	left: 50%
	transform: translateX(-50%)
	width: 85%
	height: 40% // Initial height
	padding: 3rem 1.5rem 2rem // Increased bottom padding
	display: flex
	flex-direction: column
	align-items: flex-start // Align content to left
	text-align: left
	transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1)
	z-index: 3

.info
	margin-bottom: 1rem
	transform: translateY(0px)
	transition: transform 0.2s ease

.title
	font-family: $font-family-heading
	font-size: 1.25rem
	font-weight: 700
	color: var(--text-color)
	margin-bottom: 0.25rem
	white-space: nowrap
	overflow: hidden
	text-overflow: ellipsis

.brand
	font-size: 0.9rem
	color: var(--secondary-text-color)
	margin-bottom: 1.5rem
	letter-spacing: 1px
	text-transform: uppercase
	transition: transform 0.3s ease

.price
	font-size: 1.3rem
	color: var(--text-color)
	font-weight: 300

.hover-details
	display: flex
	flex-direction: column
	align-items: flex-start // Align details to left
	gap: 1rem
	opacity: 0
	transform: translateY(20px)
	transition: all 0.4s ease 0.1s // Slight delay
	width: 100%
	flex: 1

.rating
	position: relative
	cursor: pointer
	width: fit-content
	margin-top: 0.8rem
	margin-bottom: 1rem

	&:hover
		:global(.tooltip)
			opacity: 1
			visibility: visible
			transform: translateY(-50%) translateX(0)

.sizes
	display: flex
	gap: 0.25rem // Reduced gap further to ensure single row
	font-size: 0.8rem
	color: var(--text-color)
	font-weight: 600
	text-transform: uppercase
	flex-wrap: nowrap // Force single row

	span
		cursor: pointer
		transition: all 0.2s ease
		width: 32px // Fixed width for circle
		height: 32px // Fixed height for circle
		display: flex
		align-items: center
		justify-content: center
		border-radius: 50% // Make it a circle

		&:hover
			background-color: var(--secondary-bg)
			color: var(--primary-color) // Keep text color on hover
			transform: none

		&.selected
			color: var(--primary-color)
			transform: scale(1.2)
			font-weight: 700
			background-color: transparent

.actions
	display: flex
	align-items: center
	gap: 0.5rem
	width: 100%

	.icon-btn
		display: flex
		align-items: center
		justify-content: center
		cursor: pointer
		transition: all 0.2s ease
		border: 1px solid var(--primary-color)
		background: transparent
		padding: 0
		width: 48px
		height: 48px
		border-radius: 0.5rem // rounded
		color: var(--primary-color)

		&:hover
			background-color: var(--primary-color)
			color: var(--text-color)

		&:active
			transform: scale(0.95)

	> :first-child
		flex: 1
		cursor: pointer
